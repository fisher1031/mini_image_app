<div class="contents row">
    <div class="container">

<div class="messages">
    <% @message.images.each do |image| %>
      <%= image_tag image, class:'images' %>
    <% end %>
</div>

    <div class="more">
      <ul class="more_list">
        <li>
          <%= link_to '編集', edit_message_path(@message.id), method: :get %>
        </li>
        <li>
          <%= link_to '削除', message_path(@message.id), method: :delete %>
        </li>
      </ul>
    </div>
    <p><%= @message.content %></p>
    <span class="name"><%= @message.name %>
    </span>
  </div>

<h3>いいね件数: <%= @message.likes.count %></h3>
<% if current_user.already_liked?(@message) %>
  <%= button_to 'いいねを取り消す', message_like_path(@message), method: :delete %>
<% else %>
  <%= button_to 'いいね', message_likes_path(@message) %>
<% end %>
<h2>いいねしたユーザー</h2>
<% @message.liked_users.each do |user| %>
<% end %>

    <% if user_signed_in? %>
      <%= form_with(model: [@message, @comment], local: true) do |form| %>
        <%= form.text_area :text, placeholder: "コメントする", rows: "2" %>
        <%= form.submit "SEND" %>
      <% end %>
    <% else %>
      <strong><p>※※※ コメントの投稿には新規登録/ログインが必要です ※※※</p></strong>
    <% end %>
        <div class="comments">
      <h4>＜コメント一覧＞</h4>
      <% @comments.each do |comment| %>
        <p>
          <strong><%= link_to comment.user.nickname, "/users/#{comment.user_id}" %>：</strong>
          <%= comment.text %>
        </p>
      <% end %>
    </div>
  </div>
</div>